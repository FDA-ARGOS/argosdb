{"ast":null,"code":"var _jsxFileName = \"/Users/rykahsay/projects/argosdb/app/src/components/search_results.jsx\";\nimport React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Header from \"./header\";\nimport Footer from \"./footer\";\nimport Resultfilter from \"./result_filter\";\nimport * as Endpoints from \"./endpoints\";\nimport $ from \"jquery\";\nimport { filterObjectList, rndrSearchResults } from './util';\nimport Loadingicon from \"./loading_icon\";\nimport Searchbox from \"./search_box\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass SearchResults extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      filterlist: [],\n      dialog: {\n        status: false,\n        msg: \"\"\n      }\n    };\n\n    this.handleKeyPress = e => {\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n        this.handleSearch();\n      }\n    };\n\n    this.handleSearch = () => {\n      var queryValue = $(\"#query\").val();\n      queryValue = queryValue === null ? \"\" : queryValue;\n      var reqObj = {\n        coll: \"c_bsns\",\n        query: queryValue\n      };\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(reqObj)\n      };\n      const svcUrl = Zulamodule.apiHash.get_many;\n      fetch(svcUrl, requestOptions).then(res => res.json()).then(result => {\n        var tmpState = this.state;\n        tmpState.response = result;\n        tmpState.isLoaded = true;\n\n        if (tmpState.response.status === 0) {\n          tmpState.dialog.status = true;\n          tmpState.dialog.msg = tmpState.response.error;\n        }\n\n        this.setState(tmpState); //console.log(\"Request:\",svcUrl);\n\n        console.log(\"Ajax response:\", result);\n      }, // Note: it's important to handle errors here\n      // instead of a catch() block so that we don't swallow\n      // exceptions from actual bugs in components.\n      error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      });\n    };\n\n    this.handleFilterReset = () => {\n      $('input[name=\"filtervalue\"]:checkbox:checked').prop(\"checked\", false);\n      this.setState({\n        filterlist: []\n      });\n    };\n\n    this.handleFilterApply = () => {\n      $(\"#filtercn\").toggle();\n      var tmpList = $('input[name=\"filtervalue\"]:checkbox:checked').map(function () {\n        return $(this).val();\n      }).get(); // <----\n\n      this.setState({\n        filterlist: tmpList\n      });\n    };\n\n    this.handleFilterIcon = () => {\n      $(\"#filtercn\").toggle();\n    };\n\n    this.handleDialogClose = () => {\n      var tmpState = this.state;\n      tmpState.dialog.status = false;\n      this.setState(tmpState);\n    };\n  }\n\n  componentDidMount() {\n    this.handleSearch();\n  }\n\n  render() {\n    if (!(\"response\" in this.state)) {\n      return /*#__PURE__*/_jsxDEV(Loadingicon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 16\n      }, this);\n    } //const objList = (this.props.objlist === undefined ? [] : [...this.props.objlist]);\n\n\n    const objList = this.state.response.recordlist === undefined ? [] : this.state.response.recordlist;\n    var filObj = filterObjectList(objList, this.state.filterlist);\n    var filterInfo = filObj.filterinfo;\n    var passedObjList = filObj.passedobjlist;\n    var resultSummary = passedObjList.length + \" Results\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagecn\",\n        children: [/*#__PURE__*/_jsxDEV(Alertdialog, {\n          dialog: this.state.dialog,\n          onClose: this.handleDialogClose\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchbox_div_one\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"searchbox_div_two\",\n            children: /*#__PURE__*/_jsxDEV(Searchbox, {\n              handleKeyPress: this.handleKeyPress,\n              handleSearch: this.handleSearch,\n              placeholder: \"search zulasites\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Resultfilter, {\n          filterinfo: filterInfo,\n          resultcount: objList.length,\n          resultSummary: resultSummary,\n          handleSearchIcon: this.handleSearchIcon,\n          handleFilterIcon: this.handleFilterIcon,\n          handleFilterApply: this.handleFilterApply,\n          handleFilterReset: this.handleFilterReset\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"leftblock\",\n          style: {\n            margin: \"20px 0px 0px 0px\"\n          },\n          children: rndrSearchResults(passedObjList)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SearchResults;","map":{"version":3,"sources":["/Users/rykahsay/projects/argosdb/app/src/components/search_results.jsx"],"names":["React","Component","Alertdialog","Header","Footer","Resultfilter","Endpoints","$","filterObjectList","rndrSearchResults","Loadingicon","Searchbox","SearchResults","state","filterlist","dialog","status","msg","handleKeyPress","e","key","preventDefault","handleSearch","queryValue","val","reqObj","coll","query","requestOptions","method","headers","body","JSON","stringify","svcUrl","Zulamodule","apiHash","get_many","fetch","then","res","json","result","tmpState","response","isLoaded","error","setState","console","log","handleFilterReset","prop","handleFilterApply","toggle","tmpList","map","get","handleFilterIcon","handleDialogClose","componentDidMount","render","objList","recordlist","undefined","filObj","filterInfo","filterinfo","passedObjList","passedobjlist","resultSummary","length","handleSearchIcon","margin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Alertdialog from './dialogbox';\nimport Header from \"./header\";\nimport Footer from \"./footer\";\nimport Resultfilter from \"./result_filter\";\nimport * as Endpoints from \"./endpoints\";\n\nimport $ from \"jquery\";\nimport { filterObjectList, rndrSearchResults} from './util';\nimport Loadingicon from \"./loading_icon\";\nimport Searchbox from \"./search_box\";\n\n\nclass SearchResults extends Component {\n  state = {\n    filterlist: [],\n    dialog:{\n      status:false, \n      msg:\"\"\n    }\n  };\n\n  componentDidMount() {\n    this.handleSearch();\n  }\n\n  handleKeyPress = (e) => {\n    if(e.key === \"Enter\"){\n      e.preventDefault();\n      this.handleSearch();\n    }\n  }\n\n  handleSearch = () => {\n\n    var queryValue = $(\"#query\").val();\n    queryValue = (queryValue === null ? \"\" : queryValue);\n    var reqObj = {coll:\"c_bsns\", query:queryValue};\n\n    const requestOptions = { \n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(reqObj)\n    };\n    const svcUrl = Zulamodule.apiHash.get_many;\n\n    fetch(svcUrl, requestOptions)\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          var tmpState = this.state;\n          tmpState.response = result;\n          tmpState.isLoaded = true;          \n          if (tmpState.response.status === 0){\n            tmpState.dialog.status = true;\n            tmpState.dialog.msg = tmpState.response.error;\n          }\n          this.setState(tmpState);\n          //console.log(\"Request:\",svcUrl);\n          console.log(\"Ajax response:\", result);\n        },\n        // Note: it's important to handle errors here\n        // instead of a catch() block so that we don't swallow\n        // exceptions from actual bugs in components.\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n\n  handleFilterReset = () => {\n    $('input[name=\"filtervalue\"]:checkbox:checked').prop(\"checked\", false);\n    this.setState({ filterlist: [] });\n  };\n\n  handleFilterApply = () => {\n    $(\"#filtercn\").toggle();\n    var tmpList = $('input[name=\"filtervalue\"]:checkbox:checked')\n      .map(function () {\n        return $(this).val();\n      })\n      .get(); // <----\n    this.setState({ filterlist: tmpList });\n  };\n\n  handleFilterIcon = () => {\n    $(\"#filtercn\").toggle();\n  };\n\n  \n\n  handleDialogClose = () => {\n    var tmpState = this.state;\n    tmpState.dialog.status = false;\n    this.setState(tmpState);\n  }\n\n\n\n\n\n  render() {\n  \n\n    if (!(\"response\" in this.state)){\n        return <Loadingicon/>\n    }\n\n    //const objList = (this.props.objlist === undefined ? [] : [...this.props.objlist]);\n    const objList = (this.state.response.recordlist === undefined ? [] : this.state.response.recordlist);\n\n    var filObj = filterObjectList(objList, this.state.filterlist);\n    var filterInfo = filObj.filterinfo;\n    var passedObjList = filObj.passedobjlist;\n\n    \n\n    var resultSummary = passedObjList.length + \" Results\";\n\n    \n    return (\n      <div>\n      <Header />\n      <div className=\"pagecn\">\n        <Alertdialog dialog={this.state.dialog} onClose={this.handleDialogClose}/>\n        \n        <div className=\"searchbox_div_one\">\n            <div className=\"searchbox_div_two\">\n              <Searchbox \n                handleKeyPress={this.handleKeyPress}\n                handleSearch={this.handleSearch}\n                placeholder=\"search zulasites\"\n              />\n            </div>\n        </div>\n\n        <Resultfilter\n          filterinfo={filterInfo}\n          resultcount={objList.length}\n          resultSummary={resultSummary}\n          handleSearchIcon={this.handleSearchIcon}\n          handleFilterIcon={this.handleFilterIcon}\n          handleFilterApply={this.handleFilterApply}\n          handleFilterReset={this.handleFilterReset}\n        />\n      \n        <div className=\"leftblock\" style={{margin:\"20px 0px 0px 0px\"}}>\n          {rndrSearchResults(passedObjList)}\n        </div>\n\n      </div>\n      <Footer />\n      </div>\n    );\n  }\n}\n\nexport default SearchResults;\n"]},"metadata":{},"sourceType":"module"}